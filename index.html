<html>
  <head>
    <script src="/socket.io/socket.io.js"></script>
    <script>
      let socket = io();
      let playing = false;

      setInterval(() => {
        if (!playing) location.reload();
      }, 1000 * 60 * 5);

      socket.on('play', () => {
        console.log(playing)
        if (playing) return;
        playing = true;

        let player;
        player = new YT.Player('player', {
          height: '390',
          width: '640',
          videoId: 'BiSnwPfC8Hk',
          events: {
            onReady: (event) => {
              event.target.playVideo();
            },
            onStateChange: (event) => {
              console.log(event)
              if (event.data === YT.PlayerState.PAUSED || event.data === YT.PlayerState.ENDED) {
                location.reload();
              }
            }
          },
          playerVars: {
            autoplay: 1
          }
        });
      });
    </script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-22522002-4"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-22522002-4');
    </script>
  </head>
  <body style="overflow: hidden; height: 100%">
    <iframe scrolling=no width=100% height=100% src="https://docs.google.com/spreadsheets/d/e/2PACX-1vS7m3fhO3WEkV8grcU4ILRvu-8_zXy9CVSPIiL1kbt6OjjZPArj9ejTMUsE_RBstUVWWRri7MY6NRwm/pubhtml?gid=1972265192&amp;single=true&amp;widget=true&amp;headers=false"></iframe>

    <div id="player"></div>
    <script>
      var tag = document.createElement('script');

      tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
    </script>
  </body>
</html>
